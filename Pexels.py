import asyncio
import httpx
import time
import random



p = 240

# 美食230
url1 = f'https://www.pexels.com/zh-cn/api/v3/search/photos?page={p}&per_page=24&query=%E7%BE%8E%E9%A3%9F&orientation=all&size=all&color=all&seo_tags=true'
# 食物 240
url2 = f'https://www.pexels.com/zh-cn/api/v3/search/photos?page={p}&per_page=24&query=%E9%A3%9F%E7%89%A9&orientation=all&size=all&color=all&seo_tags=true'
# 肉 150
url3 = f'https://www.pexels.com/zh-cn/api/v3/search/photos?page={p}&per_page=24&query=%E8%82%89&orientation=all&size=all&color=all&seo_tags=true'
# 女人
url4 = f'https://www.pexels.com/zh-cn/api/v3/search/photos?page={p}&per_page=24&query=%E5%A5%B3%E4%BA%BA&orientation=all&size=all&color=all&seo_tags=true'
# 约会 230
url5 = f'https://www.pexels.com/zh-cn/api/v3/search/photos?page={p}&per_page=24&query=%E7%BA%A6%E4%BC%9A&orientation=all&size=all&color=all&seo_tags=true'
# 家庭 240
url6 = f'https://www.pexels.com/zh-cn/api/v3/search/photos?page={p}&per_page=24&query=%E5%AE%B6%E5%BA%AD&orientation=all&size=all&color=all&seo_tags=true'
# 孩子 240
url7 = f'https://www.pexels.com/zh-cn/api/v3/search/photos?page={p}&per_page=24&query=%E5%AD%A9%E5%AD%90&orientation=all&size=all&color=all&seo_tags=true'
imageList = []
proxyList = ['http://120.24.76.81:8123', 'http://117.114.149.66:55443', 'http://61.216.156.222:60808', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://61.216.156.222:60808', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://61.216.185.88:60808', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://121.13.252.58:41564', 'http://120.24.76.81:8123', 'http://121.13.252.61:41564', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://222.74.73.202:42055', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://183.236.232.160:8080', 'http://121.13.252.58:41564', 'http://222.74.73.202:42055', 'http://120.24.76.81:8123', 'http://183.236.232.160:8080', 'http://210.5.10.87:53281', 'http://120.24.76.81:8123', 'http://27.42.168.46:55481', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://183.236.232.160:8080', 'http://120.24.76.81:8123', 'http://27.42.168.46:55481', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://27.42.168.46:55481', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://121.13.252.60:41564', 'http://121.13.252.58:41564', 'http://120.24.76.81:8123', 'http://121.13.252.58:41564', 'http://61.216.185.88:60808', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://117.114.149.66:55443', 'http://210.5.10.87:53281', 'http://120.24.76.81:8123', 'http://121.13.252.61:41564', 'http://120.24.76.81:8123', 'http://121.13.252.62:41564', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://182.34.17.104:9999', 'http://120.24.76.81:8123', 'http://182.34.17.104:9999', 'http://120.24.76.81:8123', 'http://121.13.252.62:41564', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://27.42.168.46:55481', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://183.236.232.160:8080', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://121.13.252.60:41564', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://183.236.232.160:8080', 'http://121.13.252.60:41564', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://121.13.252.62:41564', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://183.236.232.160:8080', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://61.216.156.222:60808', 'http://117.114.149.66:55443', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://222.74.73.202:42055', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://182.34.17.104:9999', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://120.24.76.81:8123', 'http://112.14.47.6:52024', 'http://222.74.73.202:42055', 'http://121.13.252.58:41564', 'http://117.114.149.66:55443', 'http://27.42.168.46:55481', 'http://121.13.252.61:41564', 'http://182.139.110.36:9000', 'http://183.236.232.160:8080', 'http://61.216.156.222:60808', 'http://61.216.185.88:60808', 'http://121.13.252.60:41564', 'http://120.24.76.81:8123', 'http://113.124.86.24:9999', 'http://210.5.10.87:53281', 'http://202.109.157.67:9000', 'http://171.92.21.202:9000', 'http://121.13.252.62:41564', 'http://112.14.47.6:52024', 'http://222.74.73.202:42055', 'http://121.13.252.58:41564', 'http://117.41.38.18:9000', 'http://117.114.149.66:55443', 'http://27.42.168.46:55481', 'http://121.13.252.61:41564', 'http://183.236.232.160:8080', 'http://61.216.156.222:60808', 'http://61.216.185.88:60808', 'http://171.92.21.202:9000', 'http://121.13.252.60:41564', 'http://120.24.76.81:8123', 'http://113.124.86.24:9999', 'http://113.124.86.24:9999', 'http://210.5.10.87:53281', 'http://121.13.252.62:41564', 'http://112.14.47.6:52024', 'http://117.41.38.19:9000', 'http://222.74.73.202:42055', 'http://121.13.252.58:41564', 'http://117.114.149.66:55443', 'http://27.42.168.46:55481', 'http://121.13.252.61:41564', 'http://183.236.232.160:8080', 'http://61.216.156.222:60808', 'http://61.216.185.88:60808', 'http://202.109.157.67:9000', 'http://121.13.252.60:41564', 'http://120.24.76.81:8123', 'http://202.109.157.66:9000', 'http://210.5.10.87:53281', 'http://113.124.86.24:9999', 'http://121.13.252.62:41564', 'http://112.14.47.6:52024', 'http://222.74.73.202:42055', 'http://121.13.252.58:41564', 'http://182.34.17.104:9999', 'http://117.114.149.66:55443', 'http://202.109.157.60:9000', 'http://27.42.168.46:55481', 'http://121.13.252.61:41564', 'http://183.236.232.160:8080', 'http://117.41.38.16:9000', 'http://61.216.156.222:60808', 'http://61.216.185.88:60808', 'http://121.13.252.60:41564', 'http://120.24.76.81:8123', 'http://210.5.10.87:53281', 'http://121.13.252.62:41564', 'http://112.14.47.6:52024', 'http://182.139.110.170:9000', 'http://222.74.73.202:42055', 'http://121.13.252.58:41564', 'http://117.114.149.66:55443', 'http://182.34.17.104:9999', 'http://27.42.168.46:55481', 'http://121.13.252.61:41564', 'http://113.124.86.24:9999', 'http://61.216.156.222:60808', 'http://61.216.185.88:60808', 'http://121.13.252.60:41564', 'http://120.24.76.81:8123', 'http://210.5.10.87:53281', 'http://121.13.252.62:41564', 'http://112.14.47.6:52024', 'http://202.109.157.65:9000', 'http://222.74.73.202:42055', 'http://121.13.252.58:41564', 'http://117.114.149.66:55443', 'http://114.233.71.82:9000', 'http://27.42.168.46:55481', 'http://121.13.252.61:41564', 'http://202.109.157.63:9000', 'http://202.109.157.63:9000', 'http://183.236.232.160:8080', 'http://61.216.156.222:60808', 'http://61.216.185.88:60808', 'http://121.13.252.60:41564', 'http://120.24.76.81:8123', 'http://210.5.10.87:53281', 'http://121.13.252.62:41564', 'http://202.109.157.61:9000', 'http://112.14.47.6:52024', 'http://222.74.73.202:42055', 'http://202.109.157.60:9000', 'http://117.114.149.66:55443', 'http://121.13.252.58:41564', 'http://27.42.168.46:55481', 'http://182.34.17.104:9999', 'http://121.13.252.61:41564', 'http://183.236.232.160:8080', 'http://61.216.156.222:60808', 'http://61.216.185.88:60808', 'http://121.13.252.60:41564', 'http://120.24.76.81:8123', 'http://210.5.10.87:53281', 'http://117.41.38.18:9000', 'http://121.13.252.62:41564', 'http://112.14.47.6:52024', 'http://222.74.73.202:42055', 'http://202.109.157.66:9000', 'http://117.114.149.66:55443', 'http://121.13.252.58:41564', 'http://202.109.157.61:9000', 'http://182.139.110.18:9000', 'http://121.13.252.61:41564', 'http://202.109.157.62:9000', 'http://183.236.232.160:8080', 'http://61.216.156.222:60808', 'http://61.216.185.88:60808', 'http://121.13.252.60:41564', 'http://120.24.76.81:8123', 'http://210.5.10.87:53281', 'http://121.13.252.62:41564', 'http://112.14.47.6:52024', 'http://222.74.73.202:42055', 'http://182.34.17.104:9999', 'http://202.109.157.60:9000', 'http://202.109.157.60:9000', 'http://202.109.157.60:9000', 'http://202.109.157.60:9000', 'http://202.109.157.60:9000', 'http://202.109.157.60:9000', 'http://117.114.149.66:55443', 'http://121.13.252.58:41564', 'http://182.139.110.18:9000', 'http://27.42.168.46:55481', 'http://121.13.252.61:41564', 'http://202.109.157.65:9000', 'http://202.109.157.63:9000', 'http://183.236.232.160:8080', 'http://61.216.156.222:60808', 'http://61.216.185.88:60808', 'http://61.216.185.88:60808', 'http://121.13.252.60:41564', 'http://120.24.76.81:8123', 'http://210.5.10.87:53281', 'http://121.13.252.62:41564', 'http://112.14.47.6:52024', 'http://222.74.73.202:42055', 'http://202.109.157.60:9000', 'http://182.139.111.149:9000', 'http://182.139.111.149:9000', 'http://182.139.111.149:9000', 'http://182.139.111.149:9000', 'http://182.139.111.149:9000', 'http://182.139.111.149:9000', 'http://182.139.111.149:9000', 'http://182.139.111.149:9000', 'http://182.139.111.149:9000', 'http://182.139.111.149:9000', 'http://182.139.111.149:9000', 'http://182.139.111.149:9000', 'http://117.114.149.66:55443', 'http://121.13.252.58:41564', 'http://182.34.17.104:9999', 'http://117.41.38.16:9000', 'http://117.41.38.16:9000', 'http://27.42.168.46:55481', 'http://121.13.252.61:41564', 'http://202.109.157.63:9000', 'http://182.34.17.104:9999', 'http://182.34.17.104:9999']
async def spendRequest():
    headers = {
        'referer': 'https://www.pexels.com/zh-cn/search/%E8%82%89/',
        'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36 Edg/108.0.1462.46',
        'secret-key': 'H2jk9uKnhRmL6WPwh89zBezWvr',
        'sentry-trace': '0a7f8094507948f79be85011dd1f84c0-99c80f1520dc41c9-0'
    }
    ip = random.choice(proxyList)
    proxies = {
        'http://': ip
    }
    async with httpx.AsyncClient(headers=headers,proxies=proxies) as client:
        resp = await client.get(url7)
        data = resp.json()
        for i in data['data']:
            # print(i)
            attributes = i['attributes']
            image = attributes['image']
            mediumImage = image['medium']
            largeImage = image['large']
            result = {'minImage': mediumImage, 'maxImage': largeImage}
            imageList.append(result)
        print(imageList)

# async def main():
    # return await asyncio.gather(*[spendRequest(p) for p in range(1, 2)])

asyncio.run(spendRequest())
